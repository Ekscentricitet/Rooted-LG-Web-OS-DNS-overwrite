# Rooted LG Web OS DNS overwrite
A simple script to overwrite the default DNS settings on Web OS which get reset on each boot.

## Why does this exist?
I want my TV to use a PiHole server as DNS when it is available and not have internet access otherwise. My LG TV somehow unrooted itself. After updating the firmware and rooting it again, it turned out that the TV started bypassing the DNS in the network settings. I wanted to then force my DNS on an OS level. I found out that I can do it with ```/etc/resolv.conf```. However, it turned out that this file is overwritten on boot by the Connection Manager to have the following content:

```
# Generated by Connection Manager
nameserver ::1
nameserver 127.0.0.1
```

This seems to be some default DNS, which probably fallbacks to something like 8.8.8.8 if the provided DNS is not available. I tried either prevent the overwriting or change the behavior of the default DNS, but the file system is locked and my knowledge on Linux is not advanced enough to figure out a better solution. 

So I created a script that overwrites the content of the mentioned file to point only to my own DNS.

## Using the script

### Prerequisites
 * Rooted LG Web OS TV with the above mentioned problem.
 * An SSH connection (I am using [Dev Manager](https://github.com/webosbrew/dev-manager-desktop))

### Usage
1. Download the file to your computer. 
2. Edit ```DNS_ADDRESS="<YOUR_DNS_GOES_HERE>"``` with your DNS. Make sure you save it with the correct line ending (LF).
3. Upload the file to ```/var/lib/webosbrew/init.d``` as per [RootMyTV's docs](https://github.com/RootMyTV/RootMyTV.github.io?tab=readme-ov-file#i-want-to-run-some-commands-as-root-during-boot). The file must *not* have an extension, such as ".sh", otherwise it seems not to run.
4. Make it executable with ```chmod +x <file_name>```
5. Restart your TV.

## Considerations
At first I was running the script in a loop in case the system randomly resets the DNS again, but it seems like it does it only on boot.

There must be a better solution than this one. Let me know if you know of such.